<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>Search-and-Filter Map Template</title>
    <meta charset='utf-8' />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta content='' name='description' />
    <meta content='' name='author' />
    <!-- Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/custom.css"/>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script type="text/javascript" src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<script type="text/javascript">
  $(function() {
    MapsLib.initialize();
    // $(".hint").ezpz_hint();
		
	$(':checkbox').click(function(){
	  MapsLib.doSearch();
	});

	$(':radio').click(function(){
	  MapsLib.toggleCensus();
	});
	
	$('#search_radius').change(function(){
	  MapsLib.doSearch();
	});
	
	$('#search_btn').click(function(){
	  MapsLib.doSearch();
	});
	
	$('#find_me').click(function(){
	  MapsLib.findMe(); 
	  return false;
	});
	
	$('#reset').click(function(){
	  $.address.parameter('address','');
	  MapsLib.initialize(); 
	  return false;
	});
	
	$(":text").keydown(function(e){
	    var key =  e.keyCode ? e.keyCode : e.which;
	    if(key == 13) {
	        $('#search_btn').click();
	        return false;
	    }
	});

	setTimeout(function() {
	  //console.log("refetching map tiles");
	  MapsLib.uncacheTiles();
	},3000);
 	});
</script>
</head>
<body>
    <div class='navbar navbar-default navbar-static-top'>
      <div class='container'>
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class='navbar-brand' href='index.html'>Search-and-Filter Map Template with 2 layers</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li class='active'><a href="http://epress.trincoll.edu/dataviz" target="_blank">Learn more from free DataViz book at Trinity College CT</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>
    <div class='container'>
      <div class='row'>
        <div class='col-md-4'>
          <p>Download and modify the template code <a href="https://github.com/JackDougherty/FusionTable-Map-2-layers" target="_blank">from GitHub</a><br>Based on <a href='http://derekeder.com/searchable_map_template/' target='_blank'>Searchable Map Template</a> by <a href='http://derekeder.com'>Derek Eder</a><br>Draws data from <a href='http://support.google.com/fusiontables/answer/2571232?hl=en&ref_topic=1652595' target='_blank'>Google Fusion Tables</a></p>
          <div class='well'>
            <h4>
              Address <small>(<a id='find_me' href='#'>find me</a>)</small>
            </h4>
            <p>
              <input class='form-control' id='search_address' placeholder='Enter an address or an intersection' type='text' />
            </p>
            <p>
              <label>
                within
                <select id='search_radius'>
                  <option value='400'>2 blocks</option>
                  <option value='805'>1/2 mile</option>
                  <option value='1610'>1 mile</option>
                  <option value='3220'>2 miles</option>
                </select>
              </label>
            </p>
			<h4>Neighborhood demographics<span class='mute'>(<a href='about.html#where-did-you-get-your-data-from'>where did this come from?</a>)</span></h4>
					<ol id='demographics-legend'>
						<li id='legend-left'></li>
						<li id='legend-middle'></li>
						<li id='legend-right'></li>
					</ol>
					<div class='clear'></div>
					<ul class='c3l options-v'>
						<li><label for='rbCensus1'><input name='rbCensus' type='radio' id='rbCensus1'/>Poverty rate</label></li>
						<li><label for='rbCensus2'><input name='rbCensus' type='radio' id='rbCensus2'/>Unemployment rate</label></li>
					</ul>
					<ul class='c3m options-v'>
						<li><label for='rbCensus3'><input name='rbCensus' type='radio' id='rbCensus3'/>Population</label></li>
						<li><label for='rbCensus4'><input name='rbCensus' type='radio' id='rbCensus4'/>Median income</label></li>
					</ul>
					<ul class='c3r options-v'>
						<li><label for='rbCensus7'><input name='rbCensus' type='radio' id='rbCensus7'/>Off</label></li>
					</ul>
					<div class='clear'></div>
					<hr />
					<p class='mute'>A project by <a href='http://derekeder.com'>Derek Eder</a></p>
				</div>
			</div>
			<div class="content-primary">
				<div id="map_canvas"></div>
			</div>		
	</div>
</body>
</html>